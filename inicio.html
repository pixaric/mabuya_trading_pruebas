<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mabuya Trading - Inicio</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuraci√≥n de Tailwind para un tema oscuro y fuente Inter -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-dark': '#121212',
                        'secondary-dark': '#1e1e1e',
                        'accent-gold': '#ffc107',
                        'accent-blue': '#007bff',
                        'buy': '#10b981', /* green-500 */
                        'sell': '#ef4444', /* red-500 */
                        'hold': '#f59e0b', /* amber-500 */
                        'candle-green': '#10b981', /* Verde para velas alcistas */
                        'candle-red': '#ef4444', /* Rojo para velas bajistas */
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Aumento de la fuente base para todo el cuerpo */
        body {
            font-size: 1.25rem; /* text-xl: 20px */
        }
        /* Estilo para el enlace activo */
        .active-link {
            border-bottom: 3px solid #ffc107; /* Borde m√°s grueso */
            color: #ffc107 !important;
        }
        /* Estilos del Contenedor de la Imagen/Gr√°fico para mantener la altura */
        .tradingview-widget-container {
            max-height: 450px; /* Aumentado */
            min-height: 300px; /* Aumentado */
        }
        /* Estilos para la tabla de seguimiento */
        .watchlist-table th {
            padding: 1.5rem; /* Aumentado */
            text-align: left;
            font-weight: 700;
            color: #ffc107;
            font-size: 1.5rem; /* text-2xl */
        }
        .watchlist-table td {
            padding: 1.5rem; /* Aumentado */
            border-top: 1px solid #2d2d2d;
            font-size: 1.25rem; /* text-xl */
        }
        .watchlist-table tr:hover {
            background-color: #262626; 
        }
        .watchlist-recommendation {
            font-size: 1rem; /* Peque√±o para la etiqueta */
        }
    </style>
</head>
<body class="bg-primary-dark text-gray-100 font-sans min-h-screen pt-32 sm:pt-40"> <!-- Aumento de padding superior por header grande -->

    <!-- Barra de Navegaci√≥n Fija -->
    <header class="fixed top-0 left-0 right-0 z-50 bg-secondary-dark shadow-2xl">
        <!-- Contenedor principal de navegaci√≥n -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-24"> <!-- Altura muy aumentada -->
                <!-- Logo -->
                <a href="inicio.html" class="text-4xl font-black tracking-widest text-accent-gold transition duration-300 hover:text-white"> <!-- text-4xl -->
                    MABUYA <span class="text-white">TRADING</span>
                </a>
                
                <!-- Men√∫ de Navegaci√≥n (Desktop) - Inicio Activo -->
                <nav class="hidden md:flex space-x-12"> <!-- Espacio aumentado -->
                    <!-- Inicio est√° activo -->
                    <a href="inicio.html" class="nav-link active-link text-gray-300 transition duration-150 py-3 text-xl font-medium border-b-3 border-transparent hover:border-accent-gold">Inicio</a>
                    <a href="academia.html" class="nav-link text-gray-300 hover:text-accent-gold transition duration-150 py-3 text-xl font-medium border-b-3 border-transparent hover:border-accent-gold">Academia</a>
                    <a href="videos.html" class="nav-link text-gray-300 hover:text-accent-gold transition duration-150 py-3 text-xl font-medium border-b-3 border-transparent hover:border-accent-gold">Videos</a>
                    <a href="calculadora.html" class="nav-link text-gray-300 hover:text-accent-gold transition duration-150 py-3 text-xl font-medium border-b-3 border-transparent hover:border-accent-gold">Calculadora</a>
                </nav>

                <!-- Bot√≥n de Men√∫ M√≥vil -->
                <button id="mobile-menu-button" class="md:hidden text-gray-300 hover:text-accent-gold focus:outline-none p-3 rounded-md" aria-label="Toggle Menu">
                    <!-- Icono de Hamburguesa (SVG) -->
                    <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </button>
            </div>
        </div>
        
        <!-- Men√∫ M√≥vil Desplegable -->
        <div id="mobile-menu" class="hidden md:hidden">
            <div class="px-4 pt-2 pb-4 space-y-2 sm:px-6">
                <a href="inicio.html" class="block px-3 py-3 rounded-lg text-2xl font-semibold text-white bg-accent-blue/20 hover:bg-accent-gold/20 active-link">Inicio</a>
                <a href="academia.html" class="block px-3 py-3 rounded-lg text-2xl font-semibold text-gray-300 hover:bg-accent-gold/20">Academia</a>
                <a href="videos.html" class="block px-3 py-3 rounded-lg text-2xl font-semibold text-gray-300 hover:bg-accent-gold/20">Videos</a>
                <a href="calculadora.html" class="block px-3 py-3 rounded-lg text-2xl font-semibold text-gray-300 hover:bg-accent-gold/20">Calculadora</a>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">

        <!-- Secci√≥n Principal de Inicio (Home) -->
        <section class="mb-20">
            <div class="bg-secondary-dark p-10 md:p-20 rounded-2xl shadow-2xl flex flex-col lg:flex-row items-center justify-between gap-12">
                <div class="lg:w-1/2">
                    <h1 class="text-6xl md:text-7xl font-extrabold text-white leading-tight mb-6"> <!-- Fuente muy grande -->
                        <span class="text-accent-gold">Transforma</span> tu Trading.
                    </h1>
                    <p class="text-2xl text-gray-300 mb-10"> <!-- Fuente m√°s grande -->
                        En Mabuya Trading, te proporcionamos las herramientas y el conocimiento experto para navegar los mercados financieros con confianza y estrategia. Somos tu gu√≠a hacia la rentabilidad sostenible.
                    </p>
                    <a href="academia.html" class="inline-block bg-accent-gold text-primary-dark font-black py-4 px-10 rounded-full text-xl shadow-lg transition duration-300 ease-in-out transform hover:scale-105 hover:bg-yellow-500"> <!-- Bot√≥n m√°s grande -->
                        ¬°Empieza a Aprender Hoy!
                    </a>
                </div>
                
                <!-- Gr√°fico de An√°lisis de Mercado (Ahora como SVG de Velas Japonesas) -->
                <div class="lg:w-1/2 w-full">
                    <!-- Contenedor para mantener la est√©tica y altura -->
                    <div class="tradingview-widget-container rounded-xl w-full shadow-lg border-2 border-accent-gold/50 overflow-hidden">
                        
                        <!-- SVG de Gr√°fico de Velas Japonesas (El SVG no cambia, pero el contenedor es m√°s grande) -->
                        <svg viewBox="0 0 800 450" class="w-full h-full" preserveAspectRatio="xMidYMid slice" fill="none" xmlns="http://www.w3.org/2000/svg" style="background-color: #1e1e1e;">
                            <!-- L√≠neas de Cuadr√≠cula (Gris Sutil) -->
                            <line x1="50" y1="400" x2="750" y2="400" stroke="#2d2d2d" stroke-dasharray="2 2"/>
                            <line x1="50" y1="300" x2="750" y2="300" stroke="#2d2d2d" stroke-dasharray="2 2"/>
                            <line x1="50" y1="200" x2="750" y2="200" stroke="#2d2d2d" stroke-dasharray="2 2"/>
                            <line x1="50" y1="100" x2="750" y2="100" stroke="#2d2d2d" stroke-dasharray="2 2"/>

                            <!-- Indicador de Media M√≥vil (Oro de Acento) -->
                            <polyline points="50,250 120,230 190,210 260,240 330,220 400,180 470,160 540,190 610,150 680,130 750,110" 
                                      stroke="#ffc107" 
                                      stroke-width="2" 
                                      fill="none" 
                                      stroke-linecap="round"
                                      stroke-linejoin="round"/>
                                      
                            <!-- VELAS JAPONESAS (Eje X: 70px de espacio, Ancho: 30px) -->
                            
                            <!-- Vela 1 (Alcista - Verde) -->
                            <rect x="70" y="270" width="30" height="80" fill="#10b981"/>
                            <line x1="85" y1="380" x2="85" y2="270" stroke="#10b981" stroke-width="1"/>
                            <line x1="85" y1="270" x2="85" y2="250" stroke="#10b981" stroke-width="1"/>
                            
                            <!-- Vela 2 (Bajista - Roja) -->
                            <rect x="140" y="280" width="30" height="100" fill="#ef4444"/>
                            <line x1="155" y1="390" x2="155" y2="280" stroke="#ef4444" stroke-width="1"/>
                            <line x1="155" y1="280" x2="155" y2="240" stroke="#ef4444" stroke-width="1"/>

                            <!-- Vela 3 (Alcista - Verde) -->
                            <rect x="210" y="200" width="30" height="150" fill="#10b981"/>
                            <line x1="225" y1="360" x2="225" y2="200" stroke="#10b981" stroke-width="1"/>
                            <line x1="225" y1="200" x2="225" y2="180" stroke="#10b981" stroke-width="1"/>

                            <!-- Vela 4 (Bajista - Roja) -->
                            <rect x="280" y="250" width="30" height="120" fill="#ef4444"/>
                            <line x1="295" y1="380" x2="295" y2="250" stroke="#ef4444" stroke-width="1"/>
                            <line x1="295" y1="250" x2="295" y2="220" stroke="#ef4444" stroke-width="1"/>
                            
                            <!-- Vela 5 (Alcista - Verde) -->
                            <rect x="350" y="230" width="30" height="80" fill="#10b981"/>
                            <line x1="365" y1="320" x2="365" y2="230" stroke="#10b981" stroke-width="1"/>
                            <line x1="365" y1="230" x2="365" y2="210" stroke="#10b981" stroke-width="1"/>
                            
                            <!-- Vela 6 (Bajista - Roja) -->
                            <rect x="420" y="150" width="30" height="150" fill="#ef4444"/>
                            <line x1="435" y1="310" x2="435" y2="150" stroke="#ef4444" stroke-width="1"/>
                            <line x1="435" y1="150" x2="435" y2="120" stroke="#ef4444" stroke-width="1"/>

                            <!-- Vela 7 (Alcista - Verde) -->
                            <rect x="490" y="160" width="30" height="100" fill="#10b981"/>
                            <line x1="505" y1="270" x2="505" y2="160" stroke="#10b981" stroke-width="1"/>
                            <line x1="505" y1="160" x2="505" y2="140" stroke="#10b981" stroke-width="1"/>

                            <!-- Vela 8 (Bajista - Roja) -->
                            <rect x="560" y="100" width="30" height="120" fill="#ef4444"/>
                            <line x1="575" y1="230" x2="575" y2="100" stroke="#ef4444" stroke-width="1"/>
                            <line x1="575" y1="100" x2="575" y2="80" stroke="#ef4444" stroke-width="1"/>

                            <!-- Vela 9 (Alcista - Verde) -->
                            <rect x="630" y="140" width="30" height="100" fill="#10b981"/>
                            <line x1="645" y1="250" x2="645" y2="140" stroke="#10b981" stroke-width="1"/>
                            <line x1="645" y1="140" x2="645" y2="120" stroke="#10b981" stroke-width="1"/>

                            <!-- Vela 10 (Bajista - Roja) - √öltima vela -->
                            <rect x="700" y="120" width="30" height="150" fill="#ef4444"/>
                            <line x1="715" y1="280" x2="715" y2="120" stroke="#ef4444" stroke-width="1"/>
                            <line x1="715" y1="120" x2="715" y2="90" stroke="#ef4444" stroke-width="1"/>
                            
                            <!-- Texto de T√≠tulo y Subt√≠tulo -->
                            <text x="50%" y="40" dominant-baseline="middle" text-anchor="middle" font-size="32" fill="white" font-family="Inter, sans-serif" font-weight="bold"> <!-- Aumentado -->
                                AN√ÅLISIS T√âCNICO
                            </text>
                            <text x="50%" y="70" dominant-baseline="middle" text-anchor="middle" font-size="20" fill="#ffc107" font-family="Inter, sans-serif"> <!-- Aumentado -->
                                Gr√°fico de Velas Japonesas (M5)
                            </text>
                        </svg>

                    </div>
                </div>
            </div>
        </section>

        <!-- Secci√≥n de Caracter√≠sticas Clave -->
        <section class="mb-20 pt-16">
            <h2 class="text-5xl font-bold text-center text-white mb-10">¬øPor Qu√© Elegirnos?</h2> <!-- Aumentado -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12 text-center"> <!-- Espacio aumentado -->
                <div class="bg-secondary-dark p-8 rounded-xl shadow-lg border border-gray-700"> <!-- Padding aumentado -->
                    <span class="text-5xl text-accent-gold mb-4 block">üìà</span> <!-- Icono m√°s grande -->
                    <h3 class="text-2xl font-semibold mb-3">Estrategias Probadas</h3> <!-- Aumentado -->
                    <p class="text-xl text-gray-400">Acceso a metodolog√≠as que han demostrado ser efectivas en diversos mercados.</p> <!-- Aumentado -->
                </div>
                <div class="bg-secondary-dark p-8 rounded-xl shadow-lg border border-gray-700">
                    <span class="text-5xl text-accent-gold mb-4 block">üß†</span>
                    <h3 class="text-2xl font-semibold mb-3">Psicolog√≠a de Trading</h3>
                    <p class="text-xl text-gray-400">Entrenamiento mental crucial para mantener la disciplina y gestionar las emociones.</p>
                </div>
                <div class="bg-secondary-dark p-8 rounded-xl shadow-lg border border-gray-700">
                    <span class="text-5xl text-accent-gold mb-4 block">üõ†Ô∏è</span>
                    <h3 class="text-2xl font-semibold mb-3">Herramientas √ötiles</h3>
                    <p class="text-xl text-gray-400">Calculadoras y recursos dise√±ados para simplificar tu planificaci√≥n operativa diaria.</p>
                </div>
            </div>
        </section>

        <!-- Secci√≥n de Lista de Seguimiento (Watchlist) - Tabla Estilizada con 10 Activos -->
        <section class="mb-20 pt-16">
            <h2 class="text-5xl font-bold text-center text-accent-blue mb-10">Lista de Seguimiento (Activos Clave)</h2> <!-- Aumentado -->
            <p class="text-xl text-gray-400 text-center mb-8 max-w-3xl mx-auto"> <!-- Aumentado -->
                Una selecci√≥n de 10 activos populares con recomendaciones simuladas.
            </p>

            <!-- La clase watchlist-table maneja el tama√±o de fuente y padding en el CSS -->
            <div class="bg-secondary-dark p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border-2 border-accent-blue/50 overflow-x-auto">
                <table class="w-full watchlist-table">
                    <thead>
                        <tr>
                            <th>Activo</th>
                            <th>S√≠mbolo</th>
                            <th>Precio (USD)</th>
                            <th>Cambio 24h</th>
                            <th>Recomendaci√≥n</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Fila 1 -->
                        <tr>
                            <td class="font-medium text-white">Apple Inc.</td>
                            <td class="text-gray-400">AAPL</td>
                            <td class="font-mono">$185.34</td>
                            <td class="text-buy">+1.25%</td>
                            <td>
                                <span class="px-4 py-2 watchlist-recommendation font-semibold rounded-full bg-buy/20 text-buy">COMPRAR</span>
                            </td>
                        </tr>
                        <!-- Fila 2 -->
                        <tr>
                            <td class="font-medium text-white">Microsoft Corp.</td>
                            <td class="text-gray-400">MSFT</td>
                            <td class="font-mono">$410.78</td>
                            <td class="text-sell">-0.55%</td>
                            <td>
                                <span class="px-4 py-2 watchlist-recommendation font-semibold rounded-full bg-hold/20 text-hold">MANTENER</span>
                            </td>
                        </tr>
                        <!-- Fila 3 -->
                        <tr>
                            <td class="font-medium text-white">Tesla Inc.</td>
                            <td class="text-gray-400">TSLA</td>
                            <td class="font-mono">$215.12</td>
                            <td class="text-sell">-2.10%</td>
                            <td>
                                <span class="px-4 py-2 watchlist-recommendation font-semibold rounded-full bg-sell/20 text-sell">VENDER</span>
                            </td>
                        </tr>
                        <!-- Fila 4 -->
                        <tr>
                            <td class="font-medium text-white">Alphabet Inc.</td>
                            <td class="text-gray-400">GOOG</td>
                            <td class="font-mono">$138.99</td>
                            <td class="text-buy">+0.88%</td>
                            <td>
                                <span class="px-4 py-2 watchlist-recommendation font-semibold rounded-full bg-buy/20 text-buy">COMPRAR</span>
                            </td>
                        </tr>
                        <!-- Fila 5 -->
                        <tr>
                            <td class="font-medium text-white">Bitcoin</td>
                            <td class="text-gray-400">BTC/USD</td>
                            <td class="font-mono">$65,100.00</td>
                            <td class="text-buy">+3.50%</td>
                            <td>
                                <span class="px-4 py-2 watchlist-recommendation font-semibold rounded-full bg-buy/20 text-buy">COMPRAR</span>
                            </td>
                        </tr>
                        <!-- Fila 6 -->
                        <tr>
                            <td class="font-medium text-white">Ethereum</td>
                            <td class="text-gray-400">ETH/USD</td>
                            <td class="font-mono">$3,450.50</td>
                            <td class="text-hold">0.00%</td>
                            <td>
                                <span class="px-4 py-2 watchlist-recommendation font-semibold rounded-full bg-hold/20 text-hold">MANTENER</span>
                            </td>
                        </tr>
                        <!-- Fila 7 -->
                        <tr>
                            <td class="font-medium text-white">Oro Spot</td>
                            <td class="text-gray-400">XAU/USD</td>
                            <td class="font-mono">$2,321.45</td>
                            <td class="text-sell">-0.15%</td>
                            <td>
                                <span class="px-4 py-2 watchlist-recommendation font-semibold rounded-full bg-hold/20 text-hold">MANTENER</span>
                            </td>
                        </tr>
                        <!-- Fila 8 -->
                        <tr>
                            <td class="font-medium text-white">EUR/USD</td>
                            <td class="text-gray-400">EURUSD</td>
                            <td class="font-mono">$1.0755</td>
                            <td class="text-sell">-0.22%</td>
                            <td>
                                <span class="px-4 py-2 watchlist-recommendation font-semibold rounded-full bg-sell/20 text-sell">VENDER</span>
                            </td>
                        </tr>
                        <!-- Fila 9 -->
                        <tr>
                            <td class="font-medium text-white">Amazon</td>
                            <td class="text-gray-400">AMZN</td>
                            <td class="font-mono">$188.45</td>
                            <td class="text-buy">+0.42%</td>
                            <td>
                                <span class="px-4 py-2 watchlist-recommendation font-semibold rounded-full bg-buy/20 text-buy">COMPRAR</span>
                            </td>
                        </tr>
                        <!-- Fila 10 -->
                        <tr>
                            <td class="font-medium text-white">Netflix</td>
                            <td class="text-gray-400">NFLX</td>
                            <td class="font-mono">$625.00</td>
                            <td class="text-sell">-1.80%</td>
                            <td>
                                <span class="px-4 py-2 watchlist-recommendation font-semibold rounded-full bg-sell/20 text-sell">VENDER</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Secci√≥n de Checklist y Enlaces (Organizado en Grid de 2 Columnas) -->
        <section class="mb-20 pt-16">
            <h2 class="text-5xl font-bold text-center text-accent-gold mb-10">Recursos y Preparaci√≥n</h2> <!-- T√≠tulo general para la secci√≥n -->
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
                
                <!-- Columna 1: Checklist Diario del Trader -->
                <div class="bg-secondary-dark p-8 rounded-2xl shadow-xl border-2 border-accent-gold/50"> <!-- Padding y ancho aumentado -->
                    <h3 class="text-4xl font-bold text-center text-white mb-6">Checklist Diario</h3>
                    <ul class="space-y-6"> <!-- Espacio entre elementos aumentado -->
                        <!-- Tarea 1 -->
                        <li class="flex items-start text-2xl"> <!-- Aumentado -->
                            <span class="text-buy mr-4 mt-1">‚úÖ</span>
                            <p class="text-gray-200">
                                **Revisar el Calendario Econ√≥mico:** Identificar eventos de alto impacto (noticias/discursos).
                            </p>
                        </li>
                        <!-- Tarea 2 -->
                        <li class="flex items-start text-2xl">
                            <span class="text-buy mr-4 mt-1">‚úÖ</span>
                            <p class="text-gray-200">
                                **Analizar la Estructura Superior:** Confirmar la tendencia macro (diaria/semanal).
                            </p>
                        </li>
                        <!-- Tarea 3 -->
                        <li class="flex items-start text-2xl">
                            <span class="text-buy mr-4 mt-1">‚úÖ</span>
                            <p class="text-gray-200">
                                **Evaluar el Sentimiento General:** Determinar si hay 'Aversi√≥n al Riesgo' o 'Apetito por el Riesgo'.
                            </p>
                        </li>
                        <!-- Tarea 4 -->
                        <li class="flex items-start text-2xl">
                            <span class="text-buy mr-4 mt-1">‚úÖ</span>
                            <p class="text-gray-200">
                                **Definir Sesgos de Trading:** Establecer si buscar√°s principalmente COMPRAS o VENTAS.
                            </p>
                        </li>
                        <!-- Tarea 5 -->
                        <li class="flex items-start text-2xl">
                            <span class="text-buy mr-4 mt-1">‚úÖ</span>
                            <p class="text-gray-200">
                                **Verificar el Plan de Gesti√≥n de Riesgo:** Confirmar el riesgo m√°ximo por operaci√≥n.
                            </p>
                        </li>
                        <!-- Tarea 6 -->
                        <li class="flex items-start text-2xl">
                            <span class="text-buy mr-4 mt-1">‚úÖ</span>
                            <p class="text-gray-200">
                                **Preparaci√≥n Mental:** Asegurarse de estar descansado y emocionalmente estable.
                            </p>
                        </li>
                    </ul>
                </div>
                
                <!-- Columna 2: Enlaces de Inter√©s -->
                <div class="bg-secondary-dark p-8 rounded-2xl shadow-xl border-2 border-accent-gold/50">
                    <h3 class="text-4xl font-bold text-center text-white mb-6">Enlaces de Inter√©s</h3>
                    <p class="text-xl text-gray-400 mb-6 text-center">Acceso r√°pido a las mejores plataformas de datos y an√°lisis.</p>
                    <ul class="space-y-4">
                        
                        <!-- Enlace 1: Finviz (An√°lisis de Acciones) -->
                        <li class="flex items-center bg-[#1c2a38]/50 p-4 rounded-lg hover:bg-[#1c2a38] transition duration-300 border border-gray-700">
                            <span class="text-3xl mr-4 text-accent-blue">üìä</span>
                            <a href="https://finviz.com/" target="_blank" class="text-2xl font-semibold text-white hover:text-accent-gold flex-grow">
                                Finviz
                            </a>
                            <p class="text-xl text-gray-400 hidden sm:block">Filtro y visualizaci√≥n de acciones.</p>
                        </li>

                        <!-- Enlace 2: Investing.com (Calendario Econ√≥mico y Noticias) -->
                        <li class="flex items-center bg-[#2e3740]/50 p-4 rounded-lg hover:bg-[#2e3740] transition duration-300 border border-gray-700">
                            <span class="text-3xl mr-4 text-accent-blue">üì∞</span>
                            <a href="https://www.investing.com/economic-calendar/" target="_blank" class="text-2xl font-semibold text-white hover:text-accent-gold flex-grow">
                                Investing.com (Calendario)
                            </a>
                            <p class="text-xl text-gray-400 hidden sm:block">Noticias y eventos macroecon√≥micos.</p>
                        </li>

                        <!-- Enlace 3: Yahoo Finance (Cotizaciones y Datos) -->
                        <li class="flex items-center bg-[#4f0288]/50 p-4 rounded-lg hover:bg-[#4f0288] transition duration-300 border border-gray-700">
                            <span class="text-3xl mr-4 text-accent-blue">üí∞</span>
                            <a href="https://finance.yahoo.com/" target="_blank" class="text-2xl font-semibold text-white hover:text-accent-gold flex-grow">
                                Yahoo Finanzas
                            </a>
                            <p class="text-xl text-gray-400 hidden sm:block">Datos hist√≥ricos y noticias empresariales.</p>
                        </li>

                        <!-- Enlace 4: FXStreet (Noticias de Forex) -->
                        <li class="flex items-center bg-[#405662]/50 p-4 rounded-lg hover:bg-[#405662] transition duration-300 border border-gray-700">
                            <span class="text-3xl mr-4 text-accent-blue">üí±</span>
                            <a href="https://www.fxstreet.es/" target="_blank" class="text-2xl font-semibold text-white hover:text-accent-gold flex-grow">
                                FXStreet
                            </a>
                            <p class="text-xl text-gray-400 hidden sm:block">Especializado en mercado de divisas (Forex).</p>
                        </li>

                        <!-- Enlace 5: TradingView (Gr√°ficos y An√°lisis) -->
                        <li class="flex items-center bg-[#17202A]/50 p-4 rounded-lg hover:bg-[#17202A] transition duration-300 border border-gray-700">
                            <span class="text-3xl mr-4 text-accent-blue">üìà</span>
                            <a href="https://es.tradingview.com/" target="_blank" class="text-2xl font-semibold text-white hover:text-accent-gold flex-grow">
                                TradingView
                            </a>
                            <p class="text-xl text-gray-400 hidden sm:block">Plataforma l√≠der en gr√°ficos interactivos.</p>
                        </li>

                    </ul>
                </div>
                
            </div>
        </section>
        
        <!-- Secci√≥n de Buscador de Noticias con IA (MODIFICADA) -->
        <section class="mb-20 pt-16">
            <h2 class="text-5xl font-bold text-center text-accent-blue mb-10">Buscador de Noticias con IA</h2>
            <div class="bg-secondary-dark p-8 rounded-2xl shadow-xl max-w-4xl mx-auto border-2 border-accent-blue/50">
                <p class="text-xl text-gray-400 mb-6 text-center">
                    Ingresa un s√≠mbolo de acciones (ticker, ej: AAPL, TSLA) para obtener un resumen de noticias clave del mercado, asistido por Inteligencia Artificial.
                </p>

                <div class="flex flex-col sm:flex-row gap-4 mb-8">
                    <input type="text" id="tickerInput" placeholder="Ej: GOOG, MSFT, BTC/USD" class="flex-grow p-4 rounded-xl bg-primary-dark border border-gray-600 focus:ring-accent-gold focus:border-accent-gold text-white text-xl uppercase" style="text-transform: uppercase;">
                    <button id="searchButton" class="bg-accent-gold text-primary-dark font-black py-4 px-8 rounded-xl text-xl shadow-lg transition duration-300 ease-in-out transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed">
                        Buscar Noticias con IA
                    </button>
                </div>
                
                <!-- √Årea de Resultados -->
                <div id="resultsArea" class="mt-8">
                    <!-- Loading state -->
                    <div id="loadingIndicator" class="hidden text-center">
                        <svg class="animate-spin h-10 w-10 text-accent-gold mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <p class="mt-4 text-xl text-gray-400">Analizando el mercado y generando el resumen...</p>
                    </div>

                    <!-- Output summary -->
                    <div id="summaryOutput" class="hidden bg-primary-dark p-6 rounded-xl border border-accent-gold/50">
                        <h4 class="text-3xl font-bold text-accent-gold mb-4">Resumen de Noticias para <span id="tickerDisplay" class="text-white"></span></h4>
                        <p id="summaryText" class="text-xl text-gray-300 leading-relaxed"></p>
                    </div>

                    <!-- Sources/Citations -->
                    <div id="sourcesOutput" class="hidden mt-6 bg-primary-dark p-6 rounded-xl border border-gray-600">
                        <h4 class="text-xl font-semibold text-white mb-3">Fuentes (Grounding)</h4>
                        <ul id="sourcesList" class="space-y-2 text-lg">
                            <!-- Sources will be injected here -->
                        </ul>
                    </div>

                    <!-- Error message -->
                    <div id="errorOutput" class="hidden p-4 rounded-lg bg-sell/20 border border-sell text-sell text-xl font-medium">
                        <!-- Error text will be injected here -->
                    </div>
                </div>
            </div>
        </section>


    </main>

    <!-- Footer -->
    <footer class="bg-secondary-dark mt-10 p-8 text-center text-xl text-gray-400"> <!-- Padding y texto aumentado -->
        <p>&copy; 2025 Mabuya Trading. Todos los derechos reservados. Educando la pr√≥xima generaci√≥n de traders.</p>
    </footer>

    <!-- Bloque de Script Reestructurado como M√≥dulo -->
    <script type="module">
        // Importaciones de Firebase (Necesarias para la autenticaci√≥n del entorno)
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Variables Globales para Firebase y el entorno Canvas
        let app;
        let db;
        let auth;
        let userId = null;
        let isAuthReady = false;

        // Variables de entorno inyectadas por Canvas
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        // Determinar si estamos fuera del entorno Canvas (no hay token de autenticaci√≥n disponible)
        const IS_EXTERNAL_DEPLOYMENT = typeof __initial_auth_token === 'undefined';

        // Funci√≥n de Inicializaci√≥n de Firebase (OBLIGATORIA)
        const initializeFirebase = async () => {
            if (firebaseConfig) {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        userId = user.uid;
                    } else {
                        userId = null;
                    }
                    isAuthReady = true;
                });

                try {
                    if (initialAuthToken) {
                        await signInWithCustomToken(auth, initialAuthToken);
                    } else {
                        await signInAnonymously(auth);
                    }
                } catch (error) {
                    console.error("Error during Firebase sign-in:", error);
                    isAuthReady = true; 
                }
            } else {
                console.warn("Firebase config not found. Assuming external deployment.");
                isAuthReady = true; 
            }
        };

        // --- L√≥gica del Buscador de Noticias con IA (Gemini API) ---

        // Funci√≥n para implementar la retirada exponencial para reintentos de API
        const fetchWithRetry = async (url, options, maxRetries = 5) => {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (!response.ok) {
                        if (response.status === 429 && i < maxRetries - 1) {
                            throw new Error("Rate limit exceeded. Retrying...");
                        }
                        const errorData = await response.json();
                        throw new Error(errorData.error?.message || `API request failed with status: ${response.status}`);
                    }
                    return response;
                } catch (error) {
                    if (error.message.includes("Rate limit exceeded") && i < maxRetries - 1) {
                        const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                    } else {
                        throw error;
                    }
                }
            }
            throw new Error("La llamada a la API fall√≥ despu√©s de m√∫ltiples reintentos.");
        };

        // Funci√≥n de MOCK para cuando no hay API Key (ej: en GitHub Pages)
        const getMockNews = (ticker) => {
            const mockSummary = `
                üö® **[Modo Simulaci√≥n: Despliegue Externo]** üö®

                Esta funci√≥n de IA requiere acceso a la API de Gemini, la cual se inyecta autom√°ticamente solo dentro del entorno Canvas de Mabuya Trading (donde se desarroll√≥ esta aplicaci√≥n).

                **Resumen Simulado para ${ticker.toUpperCase()}:**
                
                Se reporta que ${ticker.toUpperCase()} ha mostrado una fuerte volatilidad en las √∫ltimas 24 horas. Los analistas sugieren que la incertidumbre sobre la pr√≥xima reuni√≥n de la Reserva Federal (FOMC) est√° impulsando tanto compras agresivas en m√≠nimos como tomas de ganancias r√°pidas en altos. Los vol√∫menes han sido superiores a la media m√≥vil de 30 d√≠as. La recomendaci√≥n actual es **MANTENER** hasta tener una ruptura confirmada por encima de los niveles de resistencia clave, buscando una posible entrada de **COMPRA** si supera los $190.00.

                ---
                
                **Datos Simulados:**
                - **Activo:** ${ticker.toUpperCase()} (Simulado)
                - **Precio Actual:** $188.50 USD
                - **Cambio 24h:** +0.55%
                - **Sentimiento del Mercado:** Cautelosamente optimista.
            `;
            const mockSources = [
                { title: "Mabuya Trading - Fuente Primaria de Simulaci√≥n", uri: "#" },
                { title: "Simulaci√≥n de Datos de Mercado (No en Vivo)", uri: "#" }
            ];
            return { text: mockSummary, sources: mockSources };
        };


        const handleNewsSearch = async () => {
            const tickerInput = document.getElementById('tickerInput');
            const searchButton = document.getElementById('searchButton');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const summaryOutput = document.getElementById('summaryOutput');
            const summaryText = document.getElementById('summaryText');
            const tickerDisplay = document.getElementById('tickerDisplay');
            const sourcesOutput = document.getElementById('sourcesOutput');
            const sourcesList = document.getElementById('sourcesList');
            const errorOutput = document.getElementById('errorOutput');

            const ticker = tickerInput.value.trim().toUpperCase();

            // 1. Resetear la UI
            summaryOutput.classList.add('hidden');
            sourcesOutput.classList.add('hidden');
            errorOutput.classList.add('hidden');
            errorOutput.textContent = '';
            
            if (!ticker) {
                errorOutput.textContent = 'Por favor, introduce un s√≠mbolo de acciones v√°lido.';
                errorOutput.classList.remove('hidden');
                return;
            }

            // 2. Establecer el estado de carga
            searchButton.disabled = true;
            loadingIndicator.classList.remove('hidden');
            tickerDisplay.textContent = ticker;
            
            let finalResult;

            if (IS_EXTERNAL_DEPLOYMENT) {
                // Modo Simulaci√≥n: Retraso simulado
                await new Promise(resolve => setTimeout(resolve, 1500));
                finalResult = getMockNews(ticker);
                
            } else {
                // Modo Real: Llamada a la API de Gemini (solo funciona dentro de Canvas)
                const systemPrompt = "Act√∫a como un analista de noticias financieras especializado. Tu tarea es encontrar las noticias m√°s relevantes y recientes (√∫ltimas 48 horas) para el ticker o activo proporcionado. Proporciona un resumen conciso de los hallazgos clave en espa√±ol. Al final de tu resumen, DEBES indicar '---' y luego listar el activo, el precio y el cambio porcentual si est√°n disponibles y son relevantes para las noticias, formateado en p√°rrafos o vi√±etas. NO inventes datos. Finalmente, aseg√∫rate de que todas las afirmaciones f√°cticas est√©n respaldadas por las fuentes citadas.";
                const userQuery = `Encuentra y resume las noticias m√°s relevantes sobre el ticker de acciones o activo: ${ticker}`;
                const apiKey = ""; // Ser√° inyectada autom√°ticamente por el entorno Canvas
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    tools: [{ "google_search": {} }], // Habilitar Google Search Grounding (tiempo real)
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    },
                };
                
                try {
                    // 3. Realizar la llamada a la API
                    const response = await fetchWithRetry(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    
                    const result = await response.json();
                    const candidate = result.candidates?.[0];

                    if (!candidate || !candidate.content?.parts?.[0]?.text) {
                        throw new Error("La IA no pudo generar un resumen de noticias. Int√©ntalo con un ticker diferente o verifica la conexi√≥n.");
                    }

                    const rawText = candidate.content.parts[0].text;
                    const textParts = rawText.split('---');
                    const text = textParts[0].trim();
                    
                    let sources = [];
                    const groundingMetadata = candidate.groundingMetadata;

                    if (groundingMetadata && groundingMetadata.groundingAttributions) {
                        sources = groundingMetadata.groundingAttributions
                            .map((attribution, index) => ({
                                uri: attribution.web?.uri,
                                title: attribution.web?.title || `Fuente ${index + 1}`,
                            }))
                            .filter(source => source.uri); 
                    }
                    
                    finalResult = { text, sources };

                } catch (error) {
                    console.error("News Search Error:", error);
                    // Si el modo Real falla, volvemos a mostrar un error detallado
                    errorOutput.textContent = `Error al buscar noticias: ${error.message}. (Si est√°s fuera de Canvas, aseg√∫rate de que tu clave API de Gemini est√© configurada si deseas funcionalidad en vivo.)`;
                    errorOutput.classList.remove('hidden');
                    return; // Detenemos la ejecuci√≥n si el modo real falla
                }
            }
            
            // 4. Mostrar los resultados
            summaryText.innerHTML = finalResult.text.replace(/\n/g, '<br><br>');
            summaryOutput.classList.remove('hidden');
            
            sourcesList.innerHTML = ''; 
            if (finalResult.sources.length > 0) {
                finalResult.sources.forEach(source => {
                    const li = document.createElement('li');
                    li.className = 'flex items-start text-gray-400';
                    li.innerHTML = `
                        <span class="text-accent-gold mr-3 mt-1">üîó</span>
                        <a href="${source.uri}" target="_blank" class="hover:text-white transition duration-200 text-lg sm:text-xl font-medium" title="${source.title}">
                            ${source.title}
                        </a>
                    `;
                    sourcesList.appendChild(li);
                });
                sourcesOutput.classList.remove('hidden');
            }


            // 5. Finalizar el estado de carga
            loadingIndicator.classList.add('hidden');
            searchButton.disabled = false;
        };


        // Listener para la carga completa del DOM
        document.addEventListener('DOMContentLoaded', () => {
            initializeFirebase(); // Iniciar Firebase

            // L√≥gica para el Buscador de Noticias
            const searchButton = document.getElementById('searchButton');
            const tickerInput = document.getElementById('tickerInput');
            
            if (searchButton) {
                searchButton.addEventListener('click', handleNewsSearch);
            }
            
            // Tambi√©n disparar la b√∫squeda con la tecla 'Enter'
            if (tickerInput) {
                tickerInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault(); 
                        handleNewsSearch();
                    }
                });
            }

            // L√≥gica de JavaScript para la Navegaci√≥n M√≥vil (Existente)
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });
            }
        });
    </script>
</body>
</html>